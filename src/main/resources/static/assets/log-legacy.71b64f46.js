!function(){var e=document.createElement("style");e.innerHTML=".zfile-admin-down-link[data-v-e7855d82] .el-select-dropdown__item{padding-right:15px}.zfile-admin-down-link[data-v-e7855d82] .el-dialog__header{text-align:center}.zfile-admin-down-link[data-v-e7855d82] .el-dialog__body{height:80vh;overflow-y:auto}\n",document.head.appendChild(e),System.register(["./base-legacy.28cad0e5.js","./card-legacy.bb1d668a.js","./zh-cn-legacy.8e639616.js","./input-legacy.d4357d07.js","./tag-legacy.1f08e7fb.js","./select-legacy.9fc0fff6.js","./scrollbar-legacy.c0fd5057.js","./popper-legacy.3e7fb573.js","./table-legacy.8ce31529.js","./checkbox-legacy.dcd6a125.js","./tooltip-legacy.7c89f687.js","./popover-legacy.0eba315a.js","./button-legacy.96a0013c.js","./SvgIcon-legacy.d49e6d22.js","./table-column-legacy.ab1663ac.js","./form-item-legacy.8eb59483.js","./switch-legacy.e46c6730.js","./useLinkSetting-legacy.c2769623.js","./admin-storage-legacy.9d4d7743.js","./vue3-clipboard.esm-bundler-legacy.fd707006.js","./admin-setting-legacy.2d83c4ce.js","./common-legacy.2b8660dc.js","./index-legacy.492b6ebd.js","./route-block-legacy.2d113b05.js","./plugin-vue_export-helper-legacy.7bb61c33.js","./index-legacy.677ea204.js","./index-legacy.ebfe533e.js","./request-legacy.01567c6f.js","./index-legacy.021508e8.js","./dayjs.min-legacy.bfc9e23f.js","./index-legacy.eea43e0b.js","./debounce-legacy.45d124e9.js","./index-legacy.c304ec26.js","./_Uint8Array-legacy.5581156d.js","./event-legacy.39ad8904.js","./scroll-legacy.0bcf8f62.js","./validator-legacy.0afd2ceb.js","./focus-trap-legacy.be7f3f75.js","./_initCloneObject-legacy.54c17a65.js","./unit-legacy.203f0ef2.js","./index-legacy.d5045c51.js"],(function(e){"use strict";var n,t,o,a,l,u,c,i,r,d,f,s,p,g,m,y,v,b,h,w,j,_,x,k,V,C,K,U,z,E,D,A,S,T,L,P,R,F,I,Y,H,M,O,q,G,N,Q,B,J,W,X;return{setters:[function(e){n=e.D,t=e.bj,o=e.r},function(e){a=e.E},function(e){l=e.E,u=e.a,c=e.b,i=e.c,r=e.z,d=e.f,f=e.h,s=e.i,p=e.j},function(){},function(){},function(e){g=e.E,m=e.a},function(){},function(e){y=e.E},function(e){v=e.E,b=e.a},function(){},function(){},function(){},function(){},function(e){h=e._},function(){},function(e){w=e.E,j=e.a},function(e){_=e.E},function(e){x=e.u},function(e){k=e.l},function(e){V=e.t},function(e){C=e.l},function(e){K=e.c},function(e){U=e.G,z=e.r,E=e.o,D=e.a,A=e.f,S=e.j,T=e.e,L=e.m,P=e.u,R=e.k,F=e.P,I=e.F,Y=e.v,H=e.b,M=e.t,O=e.O,q=e.Q,G=e.R},function(e){N=e.b},function(e){Q=e._},function(e){B=e.E},function(e){J=e.E},function(e){W=e.E},function(e){X=e.E},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){var Z=function(e){return q("data-v-e7855d82"),e=e(),G(),e},$={class:"zfile-admin-down-link"},ee={class:"flex justify-between"},ne=Z((function(){return L("h3",{class:"text-lg leading-6 font-medium text-gray-900"}," 下载日志 ",-1)})),te={key:0,class:"flex space-x-1.5 justify-center items-center cursor-pointer"},oe=Z((function(){return L("span",{class:"text-gray-400 text-sm font-bold"},"记录下载日志：",-1)})),ae={class:"mt-4"},le={class:"flex justify-between space-x-20"},ue={class:"text-gray-400"},ce={class:"mb-2"},ie={key:0,class:"space-x-2"},re={key:1},de={__name:"log",setup:function(e){var q=x(),G=q.data,N=q.saveData,Q=(q.saveLoading,U({shortKey:"",storageKey:null,page:1,limit:10,path:"",ip:"",userAgent:"",referer:"",date:"",dateFrom:"",dateTo:"",total:0})),Z=function(e){Q.limit=e,Q.page=1,pe()},de=function(e){Q.page=e,pe()},fe=function(){return Q.date instanceof Array?(Q.dateFrom=Q.date[0],Q.dateTo=Q.date[1]):(Q.dateFrom="",Q.dateTo=""),Q},se=z(),pe=function(){d(fe()).then((function(e){se.value=e.data,Q.total=e.dataCount}))};E((function(){pe(),ve(),me()}));var ge=z(),me=function(){C().then((function(e){ge.value=e.data}))},ye=z(),ve=function(){k().then((function(e){ye.value=e.data}))},be=z(),he=function(){var e=be.value.getSelectionRows();0!==e.length?X.confirm("是否确认删除？","提示",{type:"warning"}).then((function(){var n=e.map((function(e){return e.id}));s({ids:n}).then((function(e){W.success("删除成功"),pe()}))})):W.warning("请至少选择一条数据")},we=function(){X.confirm("是否确认删除当前查询条件下的 ".concat(Q.total," 条直链下载日志？(如数量不对，请先点击查询后再用该功能按条件删除)"),"提示",{type:"warning"}).then((function(){p(fe()).then((function(e){W.success("清空成功"),pe()}))}))},je=function(e){V(e).then((function(){W.success("复制成功")}))},_e=function(e){window.open(e)},xe=function(e){var n;return K.removeDuplicateSeparator("".concat(null==ge||null===(n=ge.value)||void 0===n?void 0:n.domain,"/s/").concat(e))},ke=function(e){var n,t;return K.removeDuplicateSeparator("".concat(null==ge||null===(n=ge.value)||void 0===n?void 0:n.domain,"/").concat(null==ge||null===(t=ge.value)||void 0===t?void 0:t.directLinkPrefix,"/").concat(e.storageKey,"/").concat(e.path))};return function(e,d){var s=_,p=g,x=m,k=w,V=B,C=l,K=n,U=j,z=v,E=y,q=J,X=h,fe=u,ge=b,me=c,ve=i,Ve=a;return D(),A("div",$,[S(Ve,null,{default:T((function(){return[L("div",ee,[ne,P(G)?(D(),A("div",te,[oe,S(s,{onChange:P(N),"active-text":"是","inline-prompt":"","inactive-text":"否",modelValue:P(G).recordDownloadLog,"onUpdate:modelValue":d[0]||(d[0]=function(e){return P(G).recordDownloadLog=e})},null,8,["onChange","modelValue"])])):R("",!0)]),L("div",ae,[S(U,{inline:"",modelValue:P(Q),"onUpdate:modelValue":d[8]||(d[8]=function(e){return F(Q)?Q.value=e:null})},{default:T((function(){return[S(k,{label:"存储源"},{default:T((function(){return[S(x,{clearable:"",teleported:!1,modelValue:P(Q).storageKey,"onUpdate:modelValue":d[1]||(d[1]=function(e){return P(Q).storageKey=e}),placeholder:"请选择存储源"},{default:T((function(){return[(D(!0),A(I,null,Y(P(ye),(function(e){return D(),H(p,{key:e.id,label:e.name,value:e.key},{default:T((function(){return[L("div",le,[L("span",null,M(e.name),1),L("span",ue,M(e.type.description),1)])]})),_:2},1032,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),S(k,{label:"短链 Key"},{default:T((function(){return[S(V,{modelValue:P(Q).shortKey,"onUpdate:modelValue":d[2]||(d[2]=function(e){return P(Q).shortKey=e})},null,8,["modelValue"])]})),_:1}),S(k,{label:"文件路径"},{default:T((function(){return[S(V,{modelValue:P(Q).path,"onUpdate:modelValue":d[3]||(d[3]=function(e){return P(Q).path=e})},null,8,["modelValue"])]})),_:1}),S(k,{label:"请求 IP"},{default:T((function(){return[S(V,{modelValue:P(Q).ip,"onUpdate:modelValue":d[4]||(d[4]=function(e){return P(Q).ip=e})},null,8,["modelValue"])]})),_:1}),S(k,{label:"UserAgent"},{default:T((function(){return[S(V,{modelValue:P(Q).userAgent,"onUpdate:modelValue":d[5]||(d[5]=function(e){return P(Q).userAgent=e})},null,8,["modelValue"])]})),_:1}),S(k,{label:"Referer"},{default:T((function(){return[S(V,{modelValue:P(Q).referer,"onUpdate:modelValue":d[6]||(d[6]=function(e){return P(Q).referer=e})},null,8,["modelValue"])]})),_:1}),S(k,{label:"下载时间"},{default:T((function(){return[S(C,{modelValue:P(Q).date,"onUpdate:modelValue":d[7]||(d[7]=function(e){return P(Q).date=e}),type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss","default-time":[new Date(2e3,1,1,0,0,0),new Date(2e3,2,1,23,59,59)],"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间"},null,8,["modelValue","default-time"])]})),_:1}),S(k,null,{default:T((function(){return[S(K,{type:"primary",icon:P(t),onClick:pe},{default:T((function(){return[O("查询")]})),_:1},8,["icon"])]})),_:1})]})),_:1},8,["modelValue"]),L("div",ce,[S(K,{onClick:he,icon:P(o),type:"danger"},{default:T((function(){return[O("批量删除选中")]})),_:1},8,["icon"]),S(K,{onClick:we,icon:P(o),type:"danger"},{default:T((function(){return[O("删除全部页")]})),_:1},8,["icon"])]),S(ge,{border:"",ref_key:"linkTableRef",ref:be,size:"large",data:P(se),style:{width:"100%"}},{default:T((function(){return[S(z,{type:"selection",width:"55"}),S(z,{fixed:"",width:"120",label:"存储源名称"},{default:T((function(e){var n;return[S(E,{content:null===(n=e.row.storageType)||void 0===n?void 0:n.description,placement:"right"},{default:T((function(){return[L("span",null,M(e.row.storageName),1)]})),_:2},1032,["content"])]})),_:1}),S(z,{fixed:"",width:"90",align:"center",label:"下载类型"},{default:T((function(e){return[e.row.shortKey?(D(),H(q,{key:0,type:"success"},{default:T((function(){return[O("短链")]})),_:1})):(D(),H(q,{key:1},{default:T((function(){return[O("直链")]})),_:1}))]})),_:1}),S(z,{"min-width":"400","show-overflow-tooltip":!0,prop:"shortKey",label:"下载链接"},{default:T((function(e){return[e.row.shortKey?(D(),A("div",ie,[L("span",null,M(P(xe)(e.row.shortKey)),1),S(X,{onClick:function(n){return P(je)(P(xe)(e.row.shortKey))},class:"ml-2 inline cursor-pointer",name:"copy"},null,8,["onClick"]),S(X,{onClick:function(n){return P(_e)(P(xe)(e.row.shortKey))},class:"ml-1 inline cursor-pointer text-blue-500 text-sm",name:"target"},null,8,["onClick"])])):(D(),A("div",re,[L("span",null,M(P(ke)(e.row)),1),S(X,{onClick:function(n){return P(je)(P(ke)(e.row))},class:"ml-2 inline cursor-pointer",name:"copy"},null,8,["onClick"]),S(X,{onClick:function(n){return P(_e)(P(ke)(e.row))},class:"ml-1 inline cursor-pointer text-blue-500 text-sm",name:"target"},null,8,["onClick"])]))]})),_:1}),S(z,{width:"300","show-overflow-tooltip":!0,prop:"path",label:"文件路径"}),S(z,{width:"100","show-overflow-tooltip":!0,prop:"ip",label:"请求 IP"}),S(z,{width:"250","show-overflow-tooltip":!0,prop:"userAgent",label:"UserAgent"}),S(z,{width:"200","show-overflow-tooltip":!0,prop:"referer",label:"Referer"}),S(z,{width:"155",prop:"createTime",label:"下载时间"}),S(z,{fixed:"right",width:"120",label:"操作"},{default:T((function(e){return[S(fe,{title:"是否确认删除?",onConfirm:function(n){return t=e.row.id,void f(t).then((function(e){W.success("删除成功"),pe()}));var t}},{reference:T((function(){return[S(K,{icon:P(o),type:"danger"},{default:T((function(){return[O("删除")]})),_:1},8,["icon"])]})),_:2},1032,["onConfirm"])]})),_:1})]})),_:1},8,["data"]),S(ve,{locale:P(r)},{default:T((function(){return[S(me,{class:"mt-3","page-size":P(Q).limit,background:"",layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:de,onSizeChange:Z,"current-page":P(Q).page,"onUpdate:currentPage":d[9]||(d[9]=function(e){return P(Q).page=e}),"default-current-page":10,"page-sizes":[10,50,100,200,1e3,99999999],total:P(Q).total},null,8,["page-size","current-page","total"])]})),_:1},8,["locale"])])]})),_:1})])}}};"function"==typeof N&&N(de);e("default",Q(de,[["__scopeId","data-v-e7855d82"]]))}}}))}();
