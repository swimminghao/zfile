import{D as A,be as S,C as U,bf as $}from"./base.b65bdcd1.js";/* empty css                */import{Z as j,a as Z}from"./ZFormItem.f027e70d.js";import{E as G}from"./input-number.df41d4c6.js";/* empty css              */import{E as K}from"./radio.5a7362d7.js";import"./popper.aedd2598.js";/* empty css                *//* empty css               */import{a as g,f as V,m as r,au as y,I as O,r as x,w as P,u as e,K as k,b as Q,e as t,O as n,j as a,L as N,t as M,k as J,Q as W,R as X}from"./index.965ac11d.js";import{l as Y,u as ee}from"./admin-setting.46e4ebbe.js";import{E as oe}from"./request.2ccc188b.js";import{b as E}from"./route-block.9b0645f8.js";import{_ as te}from"./plugin-vue_export-helper.21dcd24c.js";import{E as ae}from"./index.22cf9654.js";import{E as le}from"./index.2a66a81e.js";import{r as H}from"./CheckBadgeIcon.b1bb4ad5.js";import{v as ie}from"./directive.d58852f6.js";import"./event.776e7e11.js";import"./index.9300971e.js";import"./focus-trap.2030fc87.js";import"./dropdown.d1deefd6.js";function F(u,p){return g(),V("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[r("path",{"fill-rule":"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z","clip-rule":"evenodd"})])}function ne(u,p){return g(),V("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[r("path",{d:"M11.47 3.84a.75.75 0 011.06 0l8.69 8.69a.75.75 0 101.06-1.06l-8.689-8.69a2.25 2.25 0 00-3.182 0l-8.69 8.69a.75.75 0 001.061 1.06l8.69-8.69z"}),r("path",{d:"M12 5.432l8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 01-.75-.75v-4.5a.75.75 0 00-.75-.75h-3a.75.75 0 00-.75.75V21a.75.75 0 01-.75.75H5.625a1.875 1.875 0 01-1.875-1.875v-6.198a2.29 2.29 0 00.091-.086L12 5.43z"})])}function re(u,p){return g(),V("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[r("path",{"fill-rule":"evenodd",d:"M1.5 6a2.25 2.25 0 012.25-2.25h16.5A2.25 2.25 0 0122.5 6v12a2.25 2.25 0 01-2.25 2.25H3.75A2.25 2.25 0 011.5 18V6zM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0021 18v-1.94l-2.69-2.689a1.5 1.5 0 00-2.12 0l-.88.879.97.97a.75.75 0 11-1.06 1.06l-5.16-5.159a1.5 1.5 0 00-2.12 0L3 16.061zm10.125-7.81a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z","clip-rule":"evenodd"})])}function se(u,p){return g(),V("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[r("path",{"fill-rule":"evenodd",d:"M12.516 2.17a.75.75 0 00-1.032 0 11.209 11.209 0 01-7.877 3.08.75.75 0 00-.722.515A12.74 12.74 0 002.25 9.75c0 5.942 4.064 10.933 9.563 12.348a.749.749 0 00.374 0c5.499-1.415 9.563-6.406 9.563-12.348 0-1.39-.223-2.73-.635-3.985a.75.75 0 00-.722-.516l-.143.001c-2.996 0-5.717-1.17-7.734-3.08zm3.094 8.016a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z","clip-rule":"evenodd"})])}function de(){const{data:u,loading:p,reload:o}=y(Y,{formatResult:b=>b.data}),{loading:w,run:L}=y(ee,{manual:!0,onSuccess(){oe({message:"\u4FDD\u5B58\u6210\u529F",type:"success"})}});return{data:u,dataLoading:p,reload:o,saveData:()=>{L(u.value)},saveLoading:w}}const B=u=>(W("data-v-620c505a"),u=u(),X(),u),me={class:"mt-2"},ue=B(()=>r("span",{class:"text-red-500 text-sm"},"\u8BBE\u7F6E\u5F02\u5E38\uFF0C\u70B9\u51FB\u67E5\u770B",-1)),pe={class:"text-sm"},fe={class:"mb-2"},ce={class:"text-red-500"},ve={class:"flex justify-end"},ge={class:"mt-2"},_e=B(()=>r("span",{class:"text-red-500 text-sm"},"\u8BBE\u7F6E\u5F02\u5E38\uFF0C\u70B9\u51FB\u67E5\u770B",-1)),xe={class:"text-sm"},Ve={class:"mb-2"},we={class:"text-red-500"},Le={class:"flex justify-end"},I={__name:"site-setting",setup(u){let p=O();const{data:o,dataLoading:w,saveData:L,saveLoading:z}=de();let b=x({siteName:[{required:!0,message:"\u8BF7\u8F93\u5165\u7AD9\u70B9\u540D\u79F0"}],faviconUrl:[{type:"url",message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684 favicon \u5730\u5740\uFF0C\u9700\u4EE5 http \u6216 https \u5F00\u5934"}],domain:[{required:!0,message:"\u8BF7\u8F93\u5165\u540E\u7AEF\u7AD9\u70B9\u57DF\u540D"}],frontDomain:[],avatar:[{type:"url",message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u5934\u50CF\u5730\u5740\uFF0C\u9700\u4EE5 http \u6216 https \u5F00\u5934"}]});const C=x(),_=()=>{document.querySelector(".z-form").click(),C.value.validate(h=>{h&&L()})};let f=x({flag:!1,except:"",action:()=>{}}),d=x({flag:!1,except:"",action:()=>{}});return P(()=>w.value,(h,l)=>{if(l===!0){let m=p.zfileConfig.baseUrl||window.location.origin,s=o.value.domain;m!==s&&(f.value.flag=!0,f.value.current=s,f.value.except=m,f.value.action=()=>{o.value.domain=m,_(),f.value.flag=!1});let c=o.value.frontDomain,v=window.location.origin;p.zfileConfig.baseUrl!==""&&c!==v?(d.value.flag=!0,d.value.current=c,d.value.except=v,d.value.action=()=>{o.value.frontDomain=v,_(),d.value.flag=!1}):p.zfileConfig.baseUrl===""&&!!c&&(d.value.flag=!0,d.value.current=c,d.value.except="\u7A7A",d.value.action=()=>{o.value.frontDomain="",_(),d.value.flag=!1})}}),(h,l)=>{const m=ae,s=j,c=A,v=le,D=K,R=G,q=Z,T=ie;return e(o)?k((g(),Q(q,{key:0,model:e(o),rules:e(b),ref_key:"siteSettingForm",ref:C},{"form-title":t(()=>[n(" \u7AD9\u70B9\u4FE1\u606F ")]),"form-sub-title":t(()=>[n(" \u8BF7\u586B\u5199\u60A8\u7684\u7AD9\u70B9\u4FE1\u606F ")]),footer:t(()=>[a(c,{type:"primary",size:"default",icon:e(H),onClick:_},{default:t(()=>[n("\u4FDD\u5B58\u8BBE\u7F6E")]),_:1},8,["icon"])]),default:t(()=>[a(s,{prop:"siteName",label:"\u7AD9\u70B9\u540D\u79F0"},{default:t(()=>[a(m,{id:"siteName","prefix-icon":e(S),modelValue:e(o).siteName,"onUpdate:modelValue":l[0]||(l[0]=i=>e(o).siteName=i)},null,8,["prefix-icon","modelValue"])]),_:1}),a(s,{prop:"faviconUrl",label:"\u7AD9\u70B9 favicon"},{tips:t(()=>[n("\u7F51\u7AD9\u5728\u6D4F\u89C8\u5668\u6807\u9898\u680F\u7684 favicon \u56FE\u6807\uFF0C\u9700\u786E\u4FDD\u8F93\u5165\u7684\u5730\u5740\u6CA1\u6709 referer \u9632\u76D7\u94FE\uFF0C\u5982\u4FEE\u6539\u540E\u4E0D\u751F\u6548\u8BF7\u6E05\u7406\u6D4F\u89C8\u5668\u7F13\u5B58\u6216\u518D\u8BD5\u3002")]),default:t(()=>[a(m,{id:"faviconUrl","prefix-icon":e(S),modelValue:e(o).faviconUrl,"onUpdate:modelValue":l[1]||(l[1]=i=>e(o).faviconUrl=i)},null,8,["prefix-icon","modelValue"])]),_:1}),a(s,{prop:"domain",label:"\u540E\u7AEF\u7AD9\u70B9\u57DF\u540D"},{tips:t(()=>[n("\u6B64\u5730\u5740\u7528\u4E8E\u751F\u6210\u76F4\u94FE\u53CA\u672C\u6B21\u5B58\u50A8\u4E0B\u8F7D\u4F7F\u7528\uFF0C\u8BF7\u52A1\u5FC5\u4FDD\u6301\u548C\u670D\u52A1\u7AEF\u5730\u5740\u4E00\u6837 (\u9700\u5199 http(s):// \u534F\u8BAE\u5934)")]),default:t(()=>[a(m,{id:"domain","prefix-icon":e(U),modelValue:e(o).domain,"onUpdate:modelValue":l[2]||(l[2]=i=>e(o).domain=i)},null,8,["prefix-icon","modelValue"]),a(v,{placement:"right",width:400,trigger:"click"},{reference:t(()=>[k(r("div",me,[ue,a(e(F),{class:"inline w-5 text-red-500"})],512),[[N,e(f).flag]])]),default:t(()=>[r("div",pe,[r("div",fe,[n("\u68C0\u6D4B\u5230\u8BBE\u7F6E\u5F02\u5E38\uFF0C\u5B9E\u9645\u540E\u7AEF\u57DF\u540D\u5E94\u4E3A "),r("span",ce,M(e(f).except),1),n("\uFF0C\u662F\u5426\u9700\u8981\u4FEE\u590D\uFF1F\uFF08\u4E0D\u4FEE\u6B63\u53EF\u80FD\u4F1A\u5F71\u54CD\u4E0B\u8F7D\u3001\u6587\u4EF6\u5939\u52A0\u5BC6\u548C\u6587\u6863\u9884\u89C8\u529F\u80FD\uFF09")]),r("div",ve,[a(c,{size:"small",type:"warning",icon:e(H),onClick:e(f).action},{default:t(()=>[n("\u81EA\u52A8\u4FEE\u6B63")]),_:1},8,["icon","onClick"])])])]),_:1})]),_:1}),a(s,{prop:"frontDomain",label:"\u524D\u7AEF\u7AD9\u70B9\u57DF\u540D"},{tips:t(()=>[n("\u524D\u540E\u7AEF\u5206\u79BB\u540E\uFF0C\u9700\u914D\u7F6E\u6B64\u5730\u5740\uFF0C\u4F1A\u5F71\u54CD 401\u3001403\u3001404 \u9875\u9762\u7684\u8DF3\u8F6C (\u9700\u5199 http(s):// \u534F\u8BAE\u5934\uFF0C\u672A\u524D\u540E\u7AEF\u5206\u79BB\u8BF7\u4FDD\u6301\u4E3A\u7A7A)")]),default:t(()=>[a(m,{"prefix-icon":e(U),modelValue:e(o).frontDomain,"onUpdate:modelValue":l[3]||(l[3]=i=>e(o).frontDomain=i)},null,8,["prefix-icon","modelValue"]),a(v,{placement:"right",width:400,trigger:"click"},{reference:t(()=>[k(r("div",ge,[_e,a(e(F),{class:"inline w-5 text-red-500"})],512),[[N,e(d).flag]])]),default:t(()=>[r("div",xe,[r("div",Ve,[n("\u68C0\u6D4B\u5230\u8BBE\u7F6E\u5F02\u5E38\uFF0C\u5B9E\u9645\u524D\u7AEF\u57DF\u540D\u5E94\u4E3A "),r("span",we,M(e(d).except),1),n("\uFF0C\u662F\u5426\u9700\u8981\u4FEE\u590D\uFF1F\uFF08\u4E0D\u4FEE\u6B63\u4F1A\u5F71\u54CD 401\u3001403\u3001404 \u9875\u9762\u7684\u8DF3\u8F6C\u529F\u80FD\uFF09")]),r("div",Le,[a(c,{size:"small",type:"warning",icon:e(H),onClick:e(d).action},{default:t(()=>[n("\u81EA\u52A8\u4FEE\u6B63")]),_:1},8,["icon","onClick"])])])]),_:1})]),_:1}),a(s,{prop:"avatar",label:"\u5934\u50CF\u5730\u5740"},{tips:t(()=>[n("\u7528\u4E8E\u7BA1\u7406\u5458\u9875\u9762\u53F3\u4E0A\u89D2\u5934\u50CF\u5730\u5740\uFF0C\u63A8\u8350\u5C3A\u5BF8\u4E3A 35 * 35.")]),default:t(()=>[a(m,{id:"avatar","prefix-icon":e($),modelValue:e(o).avatar,"onUpdate:modelValue":l[4]||(l[4]=i=>e(o).avatar=i)},null,8,["prefix-icon","modelValue"])]),_:1}),a(s,{prop:"siteHomeName",label:"\u6839\u8DEF\u5F84\u540D\u79F0"},{tips:t(()=>[n("\u7528\u4E8E\u8BBE\u7F6E\u9996\u9875\u4E0A\u65B9\u9762\u5305\u5C51\u6839\u76EE\u5F55\u7684\u9ED8\u8BA4\u540D\u79F0.")]),default:t(()=>[a(m,{id:"siteHomeName","prefix-icon":e(ne),modelValue:e(o).siteHomeName,"onUpdate:modelValue":l[5]||(l[5]=i=>e(o).siteHomeName=i)},null,8,["prefix-icon","modelValue"])]),_:1}),a(s,{prop:"siteHomeLogo",label:"\u9996\u9875 Logo \u56FE\u7247\u5730\u5740"},{tips:t(()=>[n("\u7528\u4E8E\u8BBE\u7F6E\u9996\u9875\u4E0A\u9762\u5305\u5C51\u5DE6\u4FA7 Logo\uFF0C\u7559\u7A7A\u4E3A\u4E0D\u663E\u793A\uFF0C\u4F1A\u81EA\u52A8\u5C45\u4E2D\u663E\u793A\uFF0C\u5982\u6709\u9700\u8981\u53EF\u901A\u8FC7\u81EA\u5B9A\u4E49 css \u6765\u4FEE\u6539\u9ED8\u8BA4\u6837\u5F0F, logo \u5143\u7D20\u7684 id \u4E3A zfile-home-logo")]),default:t(()=>[a(m,{id:"siteHomeLogo","prefix-icon":e(re),modelValue:e(o).siteHomeLogo,"onUpdate:modelValue":l[6]||(l[6]=i=>e(o).siteHomeLogo=i)},null,8,["prefix-icon","modelValue"])]),_:1}),a(s,{prop:"siteHomeLogoLink",label:"\u9996\u9875 Logo \u6253\u5F00\u94FE\u63A5"},{tips:t(()=>[n("\u70B9\u51FB Logo \u94FE\u63A5\u540E\u6253\u5F00\u7684\u5730\u5740\uFF0C\u4E3A\u7A7A\u5219\u70B9\u51FB\u4E0D\u8FDB\u884C\u4EFB\u4F55\u8DF3\u8F6C")]),default:t(()=>[a(m,{id:"siteHomeLogoLink","prefix-icon":e(U),modelValue:e(o).siteHomeLogoLink,"onUpdate:modelValue":l[7]||(l[7]=i=>e(o).siteHomeLogoLink=i)},null,8,["prefix-icon","modelValue"])]),_:1}),a(s,{prop:"siteHomeLogoTargetMode",label:"\u9996\u9875 Logo \u94FE\u63A5\u6253\u5F00\u65B9\u5F0F"},{tips:t(()=>[n("\u63A7\u5236 Logo \u94FE\u63A5\u7684\u6253\u5F00\u65B9\u5F0F")]),default:t(()=>[a(D,{modelValue:e(o).siteHomeLogoTargetMode,"onUpdate:modelValue":l[8]||(l[8]=i=>e(o).siteHomeLogoTargetMode=i),label:"_blank"},{default:t(()=>[n("\u65B0\u6807\u7B7E\u6253\u5F00")]),_:1},8,["modelValue"]),a(D,{modelValue:e(o).siteHomeLogoTargetMode,"onUpdate:modelValue":l[9]||(l[9]=i=>e(o).siteHomeLogoTargetMode=i),label:"_self"},{default:t(()=>[n("\u5F53\u524D\u9875\u9762\u6253\u5F00")]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"\u5907\u6848\u53F7"},{default:t(()=>[a(m,{id:"icp","prefix-icon":e(se),modelValue:e(o).icp,"onUpdate:modelValue":l[10]||(l[10]=i=>e(o).icp=i)},null,8,["prefix-icon","modelValue"])]),_:1}),a(s,{label:"\u6700\u5927\u540C\u65F6\u4E0A\u4F20\u6587\u4EF6\u6570"},{default:t(()=>[a(R,{id:"maxFileUploads",modelValue:e(o).maxFileUploads,"onUpdate:modelValue":l[11]||(l[11]=i=>e(o).maxFileUploads=i),min:1,max:99},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[T,e(z)]]):J("",!0)}}};typeof E=="function"&&E(I);var Ze=te(I,[["__scopeId","data-v-620c505a"]]);export{Ze as default};
