var se=Object.defineProperty,oe=Object.defineProperties;var re=Object.getOwnPropertyDescriptors;var K=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var P=Math.pow,U=(i,l,t)=>l in i?se(i,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[l]=t,V=(i,l)=>{for(var t in l||(l={}))ne.call(l,t)&&U(i,t,l[t]);if(K)for(var t of K(l))ie.call(l,t)&&U(i,t,l[t]);return i},q=(i,l)=>oe(i,re(l));import{u as W,b as ce}from"./request.2ccc188b.js";import{d as L,B as ue,r as v,c as w,D as ve,q as F,a as k,b as $,e as ee,K as fe,m as D,g as H,u as d,n as X,L as me,T as de,f as te,j as G,F as pe,w as I,W as J,p as he,G as be,o as ye,a8 as ge,i as we,l as Se,k as ze}from"./index.965ac11d.js";import{b as Y,a as le,t as _e,_ as j,R as Ee,d as ke,ae as E,O as Q,v as He,w as Te}from"./base.b65bdcd1.js";const g=4,Re={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},Ce=({move:i,size:l,bar:t})=>({[t.size]:l,transform:`translate${t.axis}(${i}%)`}),ae=Symbol("scrollbarContextKey"),Ne=Y({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),Be="Thumb",Pe=L({__name:"thumb",props:Ne,setup(i){const l=i,t=ue(ae),o=le("scrollbar");t||_e(Be,"can not inject scrollbar context");const u=v(),f=v(),n=v({}),m=v(!1);let s=!1,h=!1,b=Ee?document.onselectstart:null;const a=w(()=>Re[l.vertical?"vertical":"horizontal"]),S=w(()=>Ce({size:l.size,move:l.move,bar:a.value})),z=w(()=>P(u.value[a.value.offset],2)/t.wrapElement[a.value.scrollSize]/l.ratio/f.value[a.value.offset]),T=r=>{var e;if(r.stopPropagation(),r.ctrlKey||[1,2].includes(r.button))return;(e=window.getSelection())==null||e.removeAllRanges(),M(r);const c=r.currentTarget;!c||(n.value[a.value.axis]=c[a.value.offset]-(r[a.value.client]-c.getBoundingClientRect()[a.value.direction]))},x=r=>{if(!f.value||!u.value||!t.wrapElement)return;const e=Math.abs(r.target.getBoundingClientRect()[a.value.direction]-r[a.value.client]),c=f.value[a.value.offset]/2,p=(e-c)*100*z.value/u.value[a.value.offset];t.wrapElement[a.value.scroll]=p*t.wrapElement[a.value.scrollSize]/100},M=r=>{r.stopImmediatePropagation(),s=!0,document.addEventListener("mousemove",R),document.addEventListener("mouseup",y),b=document.onselectstart,document.onselectstart=()=>!1},R=r=>{if(!u.value||!f.value||s===!1)return;const e=n.value[a.value.axis];if(!e)return;const c=(u.value.getBoundingClientRect()[a.value.direction]-r[a.value.client])*-1,p=f.value[a.value.offset]-e,_=(c-p)*100*z.value/u.value[a.value.offset];t.wrapElement[a.value.scroll]=_*t.wrapElement[a.value.scrollSize]/100},y=()=>{s=!1,n.value[a.value.axis]=0,document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",y),C(),h&&(m.value=!1)},O=()=>{h=!1,m.value=!!l.size},A=()=>{h=!0,m.value=s};ve(()=>{C(),document.removeEventListener("mouseup",y)});const C=()=>{document.onselectstart!==b&&(document.onselectstart=b)};return W(F(t,"scrollbarElement"),"mousemove",O),W(F(t,"scrollbarElement"),"mouseleave",A),(r,e)=>(k(),$(de,{name:d(o).b("fade"),persisted:""},{default:ee(()=>[fe(D("div",{ref_key:"instance",ref:u,class:H([d(o).e("bar"),d(o).is(d(a).key)]),onMousedown:x},[D("div",{ref_key:"thumb",ref:f,class:H(d(o).e("thumb")),style:X(d(S)),onMousedown:T},null,38)],34),[[me,r.always||m.value]])]),_:1},8,["name"]))}});var Z=j(Pe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const Le=Y({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),xe=L({__name:"bar",props:Le,setup(i,{expose:l}){const t=i,o=v(0),u=v(0);return l({handleScroll:n=>{if(n){const m=n.offsetHeight-g,s=n.offsetWidth-g;u.value=n.scrollTop*100/m*t.ratioY,o.value=n.scrollLeft*100/s*t.ratioX}}}),(n,m)=>(k(),te(pe,null,[G(Z,{move:o.value,ratio:n.ratioX,size:n.width,always:n.always},null,8,["move","ratio","size","always"]),G(Z,{move:u.value,ratio:n.ratioY,size:n.height,vertical:"",always:n.always},null,8,["move","ratio","size","always"])],64))}});var Me=j(xe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const Oe=Y({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:ke([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),Ae={scroll:({scrollTop:i,scrollLeft:l})=>[i,l].every(E)},We="ElScrollbar",$e=L({name:We}),De=L(q(V({},$e),{props:Oe,emits:Ae,setup(i,{expose:l,emit:t}){const o=i,u=le("scrollbar");let f,n;const m=v(),s=v(),h=v(),b=v("0"),a=v("0"),S=v(),z=v(1),T=v(1),x=w(()=>{const e={};return o.height&&(e.height=Q(o.height)),o.maxHeight&&(e.maxHeight=Q(o.maxHeight)),[o.wrapStyle,e]}),M=w(()=>[o.wrapClass,u.e("wrap"),{[u.em("wrap","hidden-default")]:!o.native}]),R=w(()=>[u.e("view"),o.viewClass]),y=()=>{var e;s.value&&((e=S.value)==null||e.handleScroll(s.value),t("scroll",{scrollTop:s.value.scrollTop,scrollLeft:s.value.scrollLeft}))};function O(e,c){He(e)?s.value.scrollTo(e):E(e)&&E(c)&&s.value.scrollTo(e,c)}const A=e=>{!E(e)||(s.value.scrollTop=e)},C=e=>{!E(e)||(s.value.scrollLeft=e)},r=()=>{if(!s.value)return;const e=s.value.offsetHeight-g,c=s.value.offsetWidth-g,p=P(e,2)/s.value.scrollHeight,_=P(c,2)/s.value.scrollWidth,N=Math.max(p,o.minSize),B=Math.max(_,o.minSize);z.value=p/(e-p)/(N/(e-N)),T.value=_/(c-_)/(B/(c-B)),a.value=N+g<e?`${N}px`:"",b.value=B+g<c?`${B}px`:""};return I(()=>o.noresize,e=>{e?(f==null||f(),n==null||n()):({stop:f}=ce(h,r),n=W("resize",r))},{immediate:!0}),I(()=>[o.maxHeight,o.height],()=>{o.native||J(()=>{var e;r(),s.value&&((e=S.value)==null||e.handleScroll(s.value))})}),he(ae,be({scrollbarElement:m,wrapElement:s})),ye(()=>{o.native||J(()=>{r()})}),ge(()=>r()),l({wrapRef:s,update:r,scrollTo:O,setScrollTop:A,setScrollLeft:C,handleScroll:y}),(e,c)=>(k(),te("div",{ref_key:"scrollbarRef",ref:m,class:H(d(u).b())},[D("div",{ref_key:"wrapRef",ref:s,class:H(d(M)),style:X(d(x)),onScroll:y},[(k(),$(Se(e.tag),{ref_key:"resizeRef",ref:h,class:H(d(R)),style:X(e.viewStyle)},{default:ee(()=>[we(e.$slots,"default")]),_:3},8,["class","style"]))],38),e.native?ze("v-if",!0):(k(),$(Me,{key:0,ref_key:"barRef",ref:S,height:a.value,width:b.value,always:e.always,"ratio-x":T.value,"ratio-y":z.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}}));var Xe=j(De,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const Ve=Te(Xe);export{Ve as E};
