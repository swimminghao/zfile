!function(){var e=document.createElement("style");e.innerHTML=".el-button[data-v-620c505a],.el-input[data-v-620c505a] input{height:35px}\n",document.head.appendChild(e),System.register(["./base-legacy.28cad0e5.js","./loading-legacy.a92cda73.js","./ZFormItem-legacy.19a998d2.js","./input-number-legacy.2d301e91.js","./input-legacy.d4357d07.js","./radio-legacy.ac4eca21.js","./popper-legacy.3e7fb573.js","./popover-legacy.0eba315a.js","./button-legacy.96a0013c.js","./index-legacy.492b6ebd.js","./admin-setting-legacy.2d83c4ce.js","./request-legacy.01567c6f.js","./route-block-legacy.2d113b05.js","./plugin-vue_export-helper-legacy.7bb61c33.js","./index-legacy.677ea204.js","./index-legacy.89e00a81.js","./CheckBadgeIcon-legacy.4daa3dd8.js","./directive-legacy.0554e5f2.js","./event-legacy.39ad8904.js","./index-legacy.eea43e0b.js","./focus-trap-legacy.be7f3f75.js","./dropdown-legacy.b5ca9dce.js"],(function(e){"use strict";var n,t,a,o,i,l,u,r,c,f,d,s,m,p,g,v,x,V,b,y,h,L,w,_,j,U,H,k,z,C,M,D,N,E,T;return{setters:[function(e){n=e.D,t=e.be,a=e.C,o=e.bf},function(){},function(e){i=e.Z,l=e.a},function(e){u=e.E},function(){},function(e){r=e.E},function(){},function(){},function(){},function(e){c=e.a,f=e.f,d=e.m,s=e.au,m=e.I,p=e.r,g=e.w,v=e.u,x=e.K,V=e.b,b=e.e,y=e.O,h=e.j,L=e.L,w=e.t,_=e.k,j=e.Q,U=e.R},function(e){H=e.l,k=e.u},function(e){z=e.E},function(e){C=e.b},function(e){M=e._},function(e){D=e.E},function(e){N=e.E},function(e){E=e.r},function(e){T=e.v},function(){},function(){},function(){},function(){}],execute:function(){function B(e,n){return c(),f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[d("path",{"fill-rule":"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z","clip-rule":"evenodd"})])}function F(e,n){return c(),f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[d("path",{d:"M11.47 3.84a.75.75 0 011.06 0l8.69 8.69a.75.75 0 101.06-1.06l-8.689-8.69a2.25 2.25 0 00-3.182 0l-8.69 8.69a.75.75 0 001.061 1.06l8.69-8.69z"}),d("path",{d:"M12 5.432l8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 01-.75-.75v-4.5a.75.75 0 00-.75-.75h-3a.75.75 0 00-.75.75V21a.75.75 0 01-.75.75H5.625a1.875 1.875 0 01-1.875-1.875v-6.198a2.29 2.29 0 00.091-.086L12 5.43z"})])}function q(e,n){return c(),f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[d("path",{"fill-rule":"evenodd",d:"M1.5 6a2.25 2.25 0 012.25-2.25h16.5A2.25 2.25 0 0122.5 6v12a2.25 2.25 0 01-2.25 2.25H3.75A2.25 2.25 0 011.5 18V6zM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0021 18v-1.94l-2.69-2.689a1.5 1.5 0 00-2.12 0l-.88.879.97.97a.75.75 0 11-1.06 1.06l-5.16-5.159a1.5 1.5 0 00-2.12 0L3 16.061zm10.125-7.81a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z","clip-rule":"evenodd"})])}function A(e,n){return c(),f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[d("path",{"fill-rule":"evenodd",d:"M12.516 2.17a.75.75 0 00-1.032 0 11.209 11.209 0 01-7.877 3.08.75.75 0 00-.722.515A12.74 12.74 0 002.25 9.75c0 5.942 4.064 10.933 9.563 12.348a.749.749 0 00.374 0c5.499-1.415 9.563-6.406 9.563-12.348 0-1.39-.223-2.73-.635-3.985a.75.75 0 00-.722-.516l-.143.001c-2.996 0-5.717-1.17-7.734-3.08zm3.094 8.016a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z","clip-rule":"evenodd"})])}var I=function(e){return j("data-v-620c505a"),e=e(),U(),e},S={class:"mt-2"},R=I((function(){return d("span",{class:"text-red-500 text-sm"},"设置异常，点击查看",-1)})),Z={class:"text-sm"},K={class:"mb-2"},O={class:"text-red-500"},Q={class:"flex justify-end"},G={class:"mt-2"},J=I((function(){return d("span",{class:"text-red-500 text-sm"},"设置异常，点击查看",-1)})),P={class:"text-sm"},W={class:"mb-2"},X={class:"text-red-500"},Y={class:"flex justify-end"},$={__name:"site-setting",setup:function(e){var f=m(),j=function(){var e=s(H,{formatResult:function(e){return e.data}}),n=e.data,t=e.loading,a=e.reload,o=s(k,{manual:!0,onSuccess:function(){z({message:"保存成功",type:"success"})}}),i=o.loading,l=o.run;return{data:n,dataLoading:t,reload:a,saveData:function(){l(n.value)},saveLoading:i}}(),U=j.data,C=j.dataLoading,M=j.saveData,I=j.saveLoading,$=p({siteName:[{required:!0,message:"请输入站点名称"}],faviconUrl:[{type:"url",message:"请输入正确的 favicon 地址，需以 http 或 https 开头"}],domain:[{required:!0,message:"请输入后端站点域名"}],frontDomain:[],avatar:[{type:"url",message:"请输入正确的头像地址，需以 http 或 https 开头"}]}),ee=p(),ne=function(){document.querySelector(".z-form").click(),ee.value.validate((function(e){e&&M()}))},te=p({flag:!1,except:"",action:function(){}}),ae=p({flag:!1,except:"",action:function(){}});return g((function(){return C.value}),(function(e,n){if(!0===n){var t=f.zfileConfig.baseUrl||window.location.origin,a=U.value.domain;t!==a&&(te.value.flag=!0,te.value.current=a,te.value.except=t,te.value.action=function(){U.value.domain=t,ne(),te.value.flag=!1});var o=U.value.frontDomain,i=window.location.origin;""!==f.zfileConfig.baseUrl&&o!==i?(ae.value.flag=!0,ae.value.current=o,ae.value.except=i,ae.value.action=function(){U.value.frontDomain=i,ne(),ae.value.flag=!1}):""===f.zfileConfig.baseUrl&&o&&(ae.value.flag=!0,ae.value.current=o,ae.value.except="空",ae.value.action=function(){U.value.frontDomain="",ne(),ae.value.flag=!1})}})),function(e,f){var s=D,m=i,p=n,g=N,j=r,H=u,k=l,z=T;return v(U)?x((c(),V(k,{key:0,model:v(U),rules:v($),ref_key:"siteSettingForm",ref:ee},{"form-title":b((function(){return[y(" 站点信息 ")]})),"form-sub-title":b((function(){return[y(" 请填写您的站点信息 ")]})),footer:b((function(){return[h(p,{type:"primary",size:"default",icon:v(E),onClick:ne},{default:b((function(){return[y("保存设置")]})),_:1},8,["icon"])]})),default:b((function(){return[h(m,{prop:"siteName",label:"站点名称"},{default:b((function(){return[h(s,{id:"siteName","prefix-icon":v(t),modelValue:v(U).siteName,"onUpdate:modelValue":f[0]||(f[0]=function(e){return v(U).siteName=e})},null,8,["prefix-icon","modelValue"])]})),_:1}),h(m,{prop:"faviconUrl",label:"站点 favicon"},{tips:b((function(){return[y("网站在浏览器标题栏的 favicon 图标，需确保输入的地址没有 referer 防盗链，如修改后不生效请清理浏览器缓存或再试。")]})),default:b((function(){return[h(s,{id:"faviconUrl","prefix-icon":v(t),modelValue:v(U).faviconUrl,"onUpdate:modelValue":f[1]||(f[1]=function(e){return v(U).faviconUrl=e})},null,8,["prefix-icon","modelValue"])]})),_:1}),h(m,{prop:"domain",label:"后端站点域名"},{tips:b((function(){return[y("此地址用于生成直链及本次存储下载使用，请务必保持和服务端地址一样 (需写 http(s):// 协议头)")]})),default:b((function(){return[h(s,{id:"domain","prefix-icon":v(a),modelValue:v(U).domain,"onUpdate:modelValue":f[2]||(f[2]=function(e){return v(U).domain=e})},null,8,["prefix-icon","modelValue"]),h(g,{placement:"right",width:400,trigger:"click"},{reference:b((function(){return[x(d("div",S,[R,h(v(B),{class:"inline w-5 text-red-500"})],512),[[L,v(te).flag]])]})),default:b((function(){return[d("div",Z,[d("div",K,[y("检测到设置异常，实际后端域名应为 "),d("span",O,w(v(te).except),1),y("，是否需要修复？（不修正可能会影响下载、文件夹加密和文档预览功能）")]),d("div",Q,[h(p,{size:"small",type:"warning",icon:v(E),onClick:v(te).action},{default:b((function(){return[y("自动修正")]})),_:1},8,["icon","onClick"])])])]})),_:1})]})),_:1}),h(m,{prop:"frontDomain",label:"前端站点域名"},{tips:b((function(){return[y("前后端分离后，需配置此地址，会影响 401、403、404 页面的跳转 (需写 http(s):// 协议头，未前后端分离请保持为空)")]})),default:b((function(){return[h(s,{"prefix-icon":v(a),modelValue:v(U).frontDomain,"onUpdate:modelValue":f[3]||(f[3]=function(e){return v(U).frontDomain=e})},null,8,["prefix-icon","modelValue"]),h(g,{placement:"right",width:400,trigger:"click"},{reference:b((function(){return[x(d("div",G,[J,h(v(B),{class:"inline w-5 text-red-500"})],512),[[L,v(ae).flag]])]})),default:b((function(){return[d("div",P,[d("div",W,[y("检测到设置异常，实际前端域名应为 "),d("span",X,w(v(ae).except),1),y("，是否需要修复？（不修正会影响 401、403、404 页面的跳转功能）")]),d("div",Y,[h(p,{size:"small",type:"warning",icon:v(E),onClick:v(ae).action},{default:b((function(){return[y("自动修正")]})),_:1},8,["icon","onClick"])])])]})),_:1})]})),_:1}),h(m,{prop:"avatar",label:"头像地址"},{tips:b((function(){return[y("用于管理员页面右上角头像地址，推荐尺寸为 35 * 35.")]})),default:b((function(){return[h(s,{id:"avatar","prefix-icon":v(o),modelValue:v(U).avatar,"onUpdate:modelValue":f[4]||(f[4]=function(e){return v(U).avatar=e})},null,8,["prefix-icon","modelValue"])]})),_:1}),h(m,{prop:"siteHomeName",label:"根路径名称"},{tips:b((function(){return[y("用于设置首页上方面包屑根目录的默认名称.")]})),default:b((function(){return[h(s,{id:"siteHomeName","prefix-icon":v(F),modelValue:v(U).siteHomeName,"onUpdate:modelValue":f[5]||(f[5]=function(e){return v(U).siteHomeName=e})},null,8,["prefix-icon","modelValue"])]})),_:1}),h(m,{prop:"siteHomeLogo",label:"首页 Logo 图片地址"},{tips:b((function(){return[y("用于设置首页上面包屑左侧 Logo，留空为不显示，会自动居中显示，如有需要可通过自定义 css 来修改默认样式, logo 元素的 id 为 zfile-home-logo")]})),default:b((function(){return[h(s,{id:"siteHomeLogo","prefix-icon":v(q),modelValue:v(U).siteHomeLogo,"onUpdate:modelValue":f[6]||(f[6]=function(e){return v(U).siteHomeLogo=e})},null,8,["prefix-icon","modelValue"])]})),_:1}),h(m,{prop:"siteHomeLogoLink",label:"首页 Logo 打开链接"},{tips:b((function(){return[y("点击 Logo 链接后打开的地址，为空则点击不进行任何跳转")]})),default:b((function(){return[h(s,{id:"siteHomeLogoLink","prefix-icon":v(a),modelValue:v(U).siteHomeLogoLink,"onUpdate:modelValue":f[7]||(f[7]=function(e){return v(U).siteHomeLogoLink=e})},null,8,["prefix-icon","modelValue"])]})),_:1}),h(m,{prop:"siteHomeLogoTargetMode",label:"首页 Logo 链接打开方式"},{tips:b((function(){return[y("控制 Logo 链接的打开方式")]})),default:b((function(){return[h(j,{modelValue:v(U).siteHomeLogoTargetMode,"onUpdate:modelValue":f[8]||(f[8]=function(e){return v(U).siteHomeLogoTargetMode=e}),label:"_blank"},{default:b((function(){return[y("新标签打开")]})),_:1},8,["modelValue"]),h(j,{modelValue:v(U).siteHomeLogoTargetMode,"onUpdate:modelValue":f[9]||(f[9]=function(e){return v(U).siteHomeLogoTargetMode=e}),label:"_self"},{default:b((function(){return[y("当前页面打开")]})),_:1},8,["modelValue"])]})),_:1}),h(m,{label:"备案号"},{default:b((function(){return[h(s,{id:"icp","prefix-icon":v(A),modelValue:v(U).icp,"onUpdate:modelValue":f[10]||(f[10]=function(e){return v(U).icp=e})},null,8,["prefix-icon","modelValue"])]})),_:1}),h(m,{label:"最大同时上传文件数"},{default:b((function(){return[h(H,{id:"maxFileUploads",modelValue:v(U).maxFileUploads,"onUpdate:modelValue":f[11]||(f[11]=function(e){return v(U).maxFileUploads=e}),min:1,max:99},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"])),[[z,v(I)]]):_("",!0)}}};"function"==typeof C&&C($);e("default",M($,[["__scopeId","data-v-620c505a"]]))}}}))}();
