!function(){var e=document.createElement("style");e.innerHTML=".el-button[data-v-7666d571],.el-input[data-v-7666d571] input{height:35px}\n",document.head.appendChild(e),System.register(["./base-legacy.28cad0e5.js","./loading-legacy.a92cda73.js","./ZFormItem-legacy.19a998d2.js","./input-legacy.d4357d07.js","./tooltip-legacy.7c89f687.js","./popper-legacy.3e7fb573.js","./image-viewer-legacy.015bdb10.js","./button-legacy.96a0013c.js","./radio-legacy.ac4eca21.js","./switch-legacy.e46c6730.js","./admin-setting-legacy.2d83c4ce.js","./index-legacy.492b6ebd.js","./vue3-clipboard.esm-bundler-legacy.fd707006.js","./request-legacy.01567c6f.js","./index-legacy.021508e8.js","./route-block-legacy.2d113b05.js","./plugin-vue_export-helper-legacy.7bb61c33.js","./index-legacy.677ea204.js","./directive-legacy.0554e5f2.js","./focus-trap-legacy.be7f3f75.js","./debounce-legacy.45d124e9.js","./scroll-legacy.0bcf8f62.js","./event-legacy.39ad8904.js","./validator-legacy.0afd2ceb.js","./index-legacy.d5045c51.js"],(function(e){"use strict";var n,t,o,i,u,c,l,a,r,f,d,s,y,g,m,v,p,V,b,j,k,_,h,C,M,x,w,A,S,B,E,F,T,L,U;return{setters:[function(e){n=e.D,t=e.bn},function(){},function(e){o=e.Z,i=e.a},function(){},function(){},function(e){u=e.E},function(e){c=e.E},function(){},function(e){l=e.E},function(e){a=e.E},function(e){r=e.d,f=e.v,d=e.l,s=e.e},function(e){y=e.r,g=e.au,m=e.w,v=e.u,p=e.K,V=e.a,b=e.b,j=e.e,k=e.O,_=e.j,h=e.E,C=e.f,M=e.k,x=e.Q,w=e.R,A=e.m},function(e){S=e.t},function(e){B=e.E},function(e){E=e.E},function(e){F=e.b},function(e){T=e._},function(e){L=e.E},function(e){U=e.v},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){var D=y({});function I(){var e=g(d,{formatResult:function(e){return e.data}}),n=e.data,t=e.reload,o=g(s,{manual:!0,onSuccess:function(){B({message:"保存成功",type:"success"})}}),i=o.loading,u=o.run,c=function(){r().then((function(e){D.value=e.data}))};return{data:n,reload:t,saveData:function(){u(n.value)},saveLoading:i,load2FAInfo:c,twoFAData:D,copyTwoFASecret:function(){S(D.value.secret).then((function(){B.success("复制成功")}))},verifyCodeAndBind:function(){f(D.value).then((function(e){B.success("绑定成功"),t()}))},rebind:function(){n.value.loginVerifySecret="",c()},cancelBind:function(){E.confirm("是否确认取消绑定，确认后将自动恢复为图形验证码","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success",callback:function(e){"confirm"===e&&(n.value.loginVerifySecret="",n.value.loginVerifyMode="image")}})},validBind:function(){E.prompt("请输入双因素认证 APP 中的验证码","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValidator:function(e){return!!e},inputErrorMessage:"验证码不能为空."}).then((function(e){var t=e.value,o={secret:n.value.loginVerifySecret,code:t};f(o).then((function(){B.success("验证成功")}))}))}}}var z=function(e){return x("data-v-7666d571"),e=e(),w(),e},q=z((function(){return A("b",null,"Google 身份验证器",-1)})),P=z((function(){return A("b",null,"Microsoft Authenticator",-1)})),R=z((function(){return A("br",null,null,-1)})),Z={key:0,class:"w-full"},G={key:1},H={__name:"index",setup:function(e){var r=I(),f=r.data,d=r.saveData,s=r.saveLoading,y=r.load2FAInfo,g=r.twoFAData,x=r.copyTwoFASecret,w=r.verifyCodeAndBind,A=r.rebind,S=r.cancelBind,B=r.validBind;return m((function(){var e;return null===(e=f.value)||void 0===e?void 0:e.loginVerifyMode}),(function(e,n){"off"!==e&&"image"!==e||!n||d(),"2fa"!==e||f.value.loginVerifySecret||y()})),m((function(){var e;return null===(e=f.value)||void 0===e?void 0:e.showLogin}),(function(e,n){e!==n&&void 0!==n&&d()})),function(e,r){var d=a,m=o,E=l,F=n,T=c,D=u,I=L,z=i,H=U;return v(f)?p((V(),b(z,{key:0,model:v(f)},{"form-title":j((function(){return[k(" 安全设置 ")]})),"form-sub-title":j((function(){return[k(" 此处设置可保护您的站点安全 ")]})),default:j((function(){return[_(m,{label:"是否显示登录入口"},{tips:j((function(){return[k(" 启用后，会在门户显示后台登录入口，请根据自身情况选择是否启用 ")]})),default:j((function(){return[_(d,{modelValue:v(f).showLogin,"onUpdate:modelValue":r[0]||(r[0]=function(e){return v(f).showLogin=e})},null,8,["modelValue"])]})),_:1}),_(m,{label:"登录验证方式"},h({default:j((function(){return[_(E,{modelValue:v(f).loginVerifyMode,"onUpdate:modelValue":r[1]||(r[1]=function(e){return v(f).loginVerifyMode=e}),label:"off"},{default:j((function(){return[k("不启用登录验证")]})),_:1},8,["modelValue"]),_(E,{modelValue:v(f).loginVerifyMode,"onUpdate:modelValue":r[2]||(r[2]=function(e){return v(f).loginVerifyMode=e}),label:"image"},{default:j((function(){return[k("启用图片验证码")]})),_:1},8,["modelValue"]),_(E,{modelValue:v(f).loginVerifyMode,"onUpdate:modelValue":r[3]||(r[3]=function(e){return v(f).loginVerifyMode=e}),label:"2fa"},{default:j((function(){return[k("启用双因素认证")]})),_:1},8,["modelValue"])]})),_:2},["image"===v(f).loginVerifyMode?{name:"tips",fn:j((function(){return[k(" 图片验证码也可能会被识别，不能完全抵挡暴力破解。 ")]})),key:"0"}:void 0,"2fa"===v(f).loginVerifyMode?{name:"tips",fn:j((function(){return[k(" 双因素认证可完美保护登录认证，可使用任意支持 2FA 认证的软件，如 "),q,k("、"),P,k(" 等软件. "),R]})),key:"1"}:void 0]),1024),"2fa"===v(f).loginVerifyMode?(V(),b(m,{key:0,label:"双因素认证密钥"},h({default:j((function(){var e;return[v(f).loginVerifySecret?(V(),C("div",Z,[_(F,{size:"small",type:"primary",onClick:v(A)},{default:j((function(){return[k("重新绑定")]})),_:1},8,["onClick"]),_(F,{size:"small",type:"primary",onClick:v(S)},{default:j((function(){return[k("取消绑定")]})),_:1},8,["onClick"]),_(F,{size:"small",type:"primary",onClick:v(B)},{default:j((function(){return[k("验证绑定")]})),_:1},8,["onClick"])])):(V(),C("div",G,[_(T,{onClick:v(y),src:null===(e=v(g))||void 0===e?void 0:e.qrcode},null,8,["onClick","src"]),_(I,{readonly:"",modelValue:v(g).secret,"onUpdate:modelValue":r[4]||(r[4]=function(e){return v(g).secret=e})},{append:j((function(){return[_(D,{class:"item",effect:"dark",content:"复制",placement:"bottom"},{default:j((function(){return[_(F,{onClick:v(x),icon:v(t)},null,8,["onClick","icon"])]})),_:1})]})),_:1},8,["modelValue"])]))]})),_:2},[v(f).loginVerifySecret?void 0:{name:"tips",fn:j((function(){return[k(" 可扫描上方二维码或复制下方密钥到支持双因素认证的软件中添加。 ")]})),key:"0"}]),1024)):M("",!0),"2fa"!==v(f).loginVerifyMode||v(f).loginVerifySecret?M("",!0):(V(),b(m,{key:1,label:"双因素认证验证码"},{tips:j((function(){return[k(" 请绑定双因素认证软件后，输入显示的验证码进行绑定 ")]})),default:j((function(){return[_(I,{modelValue:v(g).code,"onUpdate:modelValue":r[5]||(r[5]=function(e){return v(g).code=e})},null,8,["modelValue"]),_(F,{onClick:v(w),type:"primary"},{default:j((function(){return[k("验证并绑定")]})),_:1},8,["onClick"])]})),_:1}))]})),_:1},8,["model"])),[[H,v(s)]]):M("",!0)}}};"function"==typeof F&&F(H);e("default",T(H,[["__scopeId","data-v-7666d571"]]))}}}))}();
