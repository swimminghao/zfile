import{D as ne,bj as re,r as D}from"./base.b65bdcd1.js";import{E as se}from"./card.23e4220d.js";import{E as ie,a as de,b as pe,c as me,z as ue,f as ce,h as _e,i as fe,j as ge}from"./zh-cn.1b322053.js";/* empty css              *//* empty css            */import{E as he,a as we}from"./select.5ac33161.js";import"./scrollbar.117c6324.js";import{E as ye}from"./popper.aedd2598.js";import{E as ve,a as be}from"./table.29200b56.js";import"./checkbox.c90315f5.js";import"./tooltip.afcd3f9d.js";/* empty css                *//* empty css               */import{_ as ke}from"./SvgIcon.314dabdd.js";/* empty css                     */import{E as Ve,a as xe}from"./form-item.5db46a7d.js";import{E as Ee}from"./switch.1ecf928e.js";import{u as Ce}from"./useLinkSetting.2b12bf8c.js";import{l as De}from"./admin-storage.1997580a.js";import{t as Le}from"./vue3-clipboard.esm-bundler.34366eba.js";import{l as Se}from"./admin-setting.46e4ebbe.js";import{c as z}from"./common.df582fdd.js";import{G as Ke,r as V,o as Te,a as m,f as h,j as e,e as r,m as s,u as o,k as Re,P as Ue,F as $e,v as Pe,b as L,t as w,O as f,Q as ze,R as Be}from"./index.965ac11d.js";import{b as B}from"./route-block.9b0645f8.js";import{_ as Ie}from"./plugin-vue_export-helper.21dcd24c.js";import{E as je}from"./index.22cf9654.js";import{E as Ae}from"./index.94e7820c.js";import{E as y}from"./request.2ccc188b.js";import{E as I}from"./index.0f169a7e.js";import"./dayjs.min.65a08ee1.js";import"./index.9300971e.js";import"./debounce.da5c4ce9.js";import"./index.c4c36dd3.js";import"./_Uint8Array.4350f927.js";import"./event.776e7e11.js";import"./scroll.06c8f1a5.js";import"./validator.58bcb820.js";import"./focus-trap.2030fc87.js";import"./_initCloneObject.7947104d.js";import"./unit.5ed4b9cd.js";import"./index.efd5e5c6.js";const j=v=>(ze("data-v-e7855d82"),v=v(),Be(),v),Fe={class:"zfile-admin-down-link"},Me={class:"flex justify-between"},Ne=j(()=>s("h3",{class:"text-lg leading-6 font-medium text-gray-900"}," \u4E0B\u8F7D\u65E5\u5FD7 ",-1)),qe={key:0,class:"flex space-x-1.5 justify-center items-center cursor-pointer"},Ye=j(()=>s("span",{class:"text-gray-400 text-sm font-bold"},"\u8BB0\u5F55\u4E0B\u8F7D\u65E5\u5FD7\uFF1A",-1)),Qe={class:"mt-4"},He={class:"flex justify-between space-x-20"},Oe={class:"text-gray-400"},Ge={class:"mb-2"},Je={key:0,class:"space-x-2"},We={key:1},A={__name:"log",setup(v){const{data:x,saveData:F,saveLoading:Xe}=Ce(),l=Ke({shortKey:"",storageKey:null,page:1,limit:10,path:"",ip:"",userAgent:"",referer:"",date:"",dateFrom:"",dateTo:"",total:0}),M=n=>{l.limit=n,l.page=1,u()},N=n=>{l.page=n,u()},S=()=>(l.date instanceof Array?(l.dateFrom=l.date[0],l.dateTo=l.date[1]):(l.dateFrom="",l.dateTo=""),l),K=V(),u=()=>{ce(S()).then(n=>{K.value=n.data,l.total=n.dataCount})};Te(()=>{u(),Y(),q()});const i=V(),q=()=>{Se().then(n=>{i.value=n.data})},T=V(),Y=()=>{De().then(n=>{T.value=n.data})},Q=n=>{_e(n).then(a=>{y.success("\u5220\u9664\u6210\u529F"),u()})},R=V(),H=()=>{let n=R.value.getSelectionRows();if(n.length===0){y.warning("\u8BF7\u81F3\u5C11\u9009\u62E9\u4E00\u6761\u6570\u636E");return}I.confirm("\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F","\u63D0\u793A",{type:"warning"}).then(()=>{let a=n.map(c=>c.id);fe({ids:a}).then(c=>{y.success("\u5220\u9664\u6210\u529F"),u()})})},O=()=>{I.confirm(`\u662F\u5426\u786E\u8BA4\u5220\u9664\u5F53\u524D\u67E5\u8BE2\u6761\u4EF6\u4E0B\u7684 ${l.total} \u6761\u76F4\u94FE\u4E0B\u8F7D\u65E5\u5FD7\uFF1F(\u5982\u6570\u91CF\u4E0D\u5BF9\uFF0C\u8BF7\u5148\u70B9\u51FB\u67E5\u8BE2\u540E\u518D\u7528\u8BE5\u529F\u80FD\u6309\u6761\u4EF6\u5220\u9664)`,"\u63D0\u793A",{type:"warning"}).then(()=>{ge(S()).then(n=>{y.success("\u6E05\u7A7A\u6210\u529F"),u()})})};let U=n=>{Le(n).then(()=>{y.success("\u590D\u5236\u6210\u529F")})},$=n=>{window.open(n)},E=n=>{var a;return z.removeDuplicateSeparator(`${(a=i==null?void 0:i.value)==null?void 0:a.domain}/s/${n}`)},C=n=>{var a,c;return z.removeDuplicateSeparator(`${(a=i==null?void 0:i.value)==null?void 0:a.domain}/${(c=i==null?void 0:i.value)==null?void 0:c.directLinkPrefix}/${n.storageKey}/${n.path}`)};return(n,a)=>{const c=Ee,G=he,J=we,p=Ve,g=je,W=ie,b=ne,X=xe,d=ve,Z=ye,P=Ae,k=ke,ee=de,te=be,oe=pe,le=me,ae=se;return m(),h("div",Fe,[e(ae,null,{default:r(()=>[s("div",Me,[Ne,o(x)?(m(),h("div",qe,[Ye,e(c,{onChange:o(F),"active-text":"\u662F","inline-prompt":"","inactive-text":"\u5426",modelValue:o(x).recordDownloadLog,"onUpdate:modelValue":a[0]||(a[0]=t=>o(x).recordDownloadLog=t)},null,8,["onChange","modelValue"])])):Re("",!0)]),s("div",Qe,[e(X,{inline:"",modelValue:o(l),"onUpdate:modelValue":a[8]||(a[8]=t=>Ue(l)?l.value=t:null)},{default:r(()=>[e(p,{label:"\u5B58\u50A8\u6E90"},{default:r(()=>[e(J,{clearable:"",teleported:!1,modelValue:o(l).storageKey,"onUpdate:modelValue":a[1]||(a[1]=t=>o(l).storageKey=t),placeholder:"\u8BF7\u9009\u62E9\u5B58\u50A8\u6E90"},{default:r(()=>[(m(!0),h($e,null,Pe(o(T),t=>(m(),L(G,{key:t.id,label:t.name,value:t.key},{default:r(()=>[s("div",He,[s("span",null,w(t.name),1),s("span",Oe,w(t.type.description),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"\u77ED\u94FE Key"},{default:r(()=>[e(g,{modelValue:o(l).shortKey,"onUpdate:modelValue":a[2]||(a[2]=t=>o(l).shortKey=t)},null,8,["modelValue"])]),_:1}),e(p,{label:"\u6587\u4EF6\u8DEF\u5F84"},{default:r(()=>[e(g,{modelValue:o(l).path,"onUpdate:modelValue":a[3]||(a[3]=t=>o(l).path=t)},null,8,["modelValue"])]),_:1}),e(p,{label:"\u8BF7\u6C42 IP"},{default:r(()=>[e(g,{modelValue:o(l).ip,"onUpdate:modelValue":a[4]||(a[4]=t=>o(l).ip=t)},null,8,["modelValue"])]),_:1}),e(p,{label:"UserAgent"},{default:r(()=>[e(g,{modelValue:o(l).userAgent,"onUpdate:modelValue":a[5]||(a[5]=t=>o(l).userAgent=t)},null,8,["modelValue"])]),_:1}),e(p,{label:"Referer"},{default:r(()=>[e(g,{modelValue:o(l).referer,"onUpdate:modelValue":a[6]||(a[6]=t=>o(l).referer=t)},null,8,["modelValue"])]),_:1}),e(p,{label:"\u4E0B\u8F7D\u65F6\u95F4"},{default:r(()=>[e(W,{modelValue:o(l).date,"onUpdate:modelValue":a[7]||(a[7]=t=>o(l).date=t),type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss","default-time":[new Date(2e3,1,1,0,0,0),new Date(2e3,2,1,23,59,59)],"range-separator":"\u81F3","start-placeholder":"\u5F00\u59CB\u65F6\u95F4","end-placeholder":"\u7ED3\u675F\u65F6\u95F4"},null,8,["modelValue","default-time"])]),_:1}),e(p,null,{default:r(()=>[e(b,{type:"primary",icon:o(re),onClick:u},{default:r(()=>[f("\u67E5\u8BE2")]),_:1},8,["icon"])]),_:1})]),_:1},8,["modelValue"]),s("div",Ge,[e(b,{onClick:H,icon:o(D),type:"danger"},{default:r(()=>[f("\u6279\u91CF\u5220\u9664\u9009\u4E2D")]),_:1},8,["icon"]),e(b,{onClick:O,icon:o(D),type:"danger"},{default:r(()=>[f("\u5220\u9664\u5168\u90E8\u9875")]),_:1},8,["icon"])]),e(te,{border:"",ref_key:"linkTableRef",ref:R,size:"large",data:o(K),style:{width:"100%"}},{default:r(()=>[e(d,{type:"selection",width:"55"}),e(d,{fixed:"",width:"120",label:"\u5B58\u50A8\u6E90\u540D\u79F0"},{default:r(t=>{var _;return[e(Z,{content:(_=t.row.storageType)==null?void 0:_.description,placement:"right"},{default:r(()=>[s("span",null,w(t.row.storageName),1)]),_:2},1032,["content"])]}),_:1}),e(d,{fixed:"",width:"90",align:"center",label:"\u4E0B\u8F7D\u7C7B\u578B"},{default:r(t=>[t.row.shortKey?(m(),L(P,{key:0,type:"success"},{default:r(()=>[f("\u77ED\u94FE")]),_:1})):(m(),L(P,{key:1},{default:r(()=>[f("\u76F4\u94FE")]),_:1}))]),_:1}),e(d,{"min-width":"400","show-overflow-tooltip":!0,prop:"shortKey",label:"\u4E0B\u8F7D\u94FE\u63A5"},{default:r(t=>[t.row.shortKey?(m(),h("div",Je,[s("span",null,w(o(E)(t.row.shortKey)),1),e(k,{onClick:_=>o(U)(o(E)(t.row.shortKey)),class:"ml-2 inline cursor-pointer",name:"copy"},null,8,["onClick"]),e(k,{onClick:_=>o($)(o(E)(t.row.shortKey)),class:"ml-1 inline cursor-pointer text-blue-500 text-sm",name:"target"},null,8,["onClick"])])):(m(),h("div",We,[s("span",null,w(o(C)(t.row)),1),e(k,{onClick:_=>o(U)(o(C)(t.row)),class:"ml-2 inline cursor-pointer",name:"copy"},null,8,["onClick"]),e(k,{onClick:_=>o($)(o(C)(t.row)),class:"ml-1 inline cursor-pointer text-blue-500 text-sm",name:"target"},null,8,["onClick"])]))]),_:1}),e(d,{width:"300","show-overflow-tooltip":!0,prop:"path",label:"\u6587\u4EF6\u8DEF\u5F84"}),e(d,{width:"100","show-overflow-tooltip":!0,prop:"ip",label:"\u8BF7\u6C42 IP"}),e(d,{width:"250","show-overflow-tooltip":!0,prop:"userAgent",label:"UserAgent"}),e(d,{width:"200","show-overflow-tooltip":!0,prop:"referer",label:"Referer"}),e(d,{width:"155",prop:"createTime",label:"\u4E0B\u8F7D\u65F6\u95F4"}),e(d,{fixed:"right",width:"120",label:"\u64CD\u4F5C"},{default:r(t=>[e(ee,{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664?",onConfirm:_=>Q(t.row.id)},{reference:r(()=>[e(b,{icon:o(D),type:"danger"},{default:r(()=>[f("\u5220\u9664")]),_:1},8,["icon"])]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"]),e(le,{locale:o(ue)},{default:r(()=>[e(oe,{class:"mt-3","page-size":o(l).limit,background:"",layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:N,onSizeChange:M,"current-page":o(l).page,"onUpdate:currentPage":a[9]||(a[9]=t=>o(l).page=t),"default-current-page":10,"page-sizes":[10,50,100,200,1e3,99999999],total:o(l).total},null,8,["page-size","current-page","total"])]),_:1},8,["locale"])])]),_:1})])}}};typeof B=="function"&&B(A);var At=Ie(A,[["__scopeId","data-v-e7855d82"]]);export{At as default};
