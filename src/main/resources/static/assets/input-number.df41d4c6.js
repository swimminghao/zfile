var ce=Object.defineProperty,de=Object.defineProperties;var me=Object.getOwnPropertyDescriptors;var W=Object.getOwnPropertySymbols;var pe=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable;var Y=(t,i,l)=>i in t?ce(t,i,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[i]=l,j=(t,i)=>{for(var l in i||(i={}))pe.call(i,l)&&Y(t,l,i[l]);if(W)for(var l of W(i))be.call(i,l)&&Y(t,l,i[l]);return t},H=(t,i)=>de(t,me(i));import{d as ne,r as fe,G as ve,c as V,w as Ne,o as he,a8 as Ve,a as f,f as D,K as q,u as r,g as K,z as _,j as M,e as J,b as S,k as Q,h as k}from"./index.965ac11d.js";import{E as ye}from"./index.22cf9654.js";import{b as Ie,ad as ge,ae as m,m as I,n as we,a as Ee,an as _e,am as P,ac as Se,o as ke,a5 as Pe,bg as Fe,E as X,a6 as Ae,bh as Ce,_ as xe,t as Be,k as Te,y as Z,w as ze}from"./base.b65bdcd1.js";import{C as te,I as F,U as y}from"./event.776e7e11.js";import{v as ee}from"./index.9300971e.js";const De=Ie({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:ge,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:t=>t===null||m(t)||["min","max"].includes(t),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:t=>t>=0&&t===Number.parseInt(`${t}`,10)},validateEvent:{type:Boolean,default:!0}}),Ke={[te]:(t,i)=>i!==t,blur:t=>t instanceof FocusEvent,focus:t=>t instanceof FocusEvent,[F]:t=>m(t)||I(t),[y]:t=>m(t)||I(t)},Me=["aria-label","onKeydown"],Oe=["aria-label","onKeydown"],Ue=ne({name:"ElInputNumber"}),Ge=ne(H(j({},Ue),{props:De,emits:Ke,setup(t,{expose:i,emit:l}){const u=t,{t:O}=we(),p=Ee("input-number"),N=fe(),c=ve({currentValue:u.modelValue,userInput:null}),{formItem:v}=_e(),U=V(()=>m(u.modelValue)&&u.modelValue<=u.min),G=V(()=>m(u.modelValue)&&u.modelValue>=u.max),re=V(()=>{const e=L(u.step);return P(u.precision)?Math.max(L(u.modelValue),e):(e>u.precision,u.precision)}),A=V(()=>u.controls&&u.controlsPosition==="right"),$=Se(),h=ke(),C=V(()=>{if(c.userInput!==null)return c.userInput;let e=c.currentValue;if(I(e))return"";if(m(e)){if(Number.isNaN(e))return"";P(u.precision)||(e=e.toFixed(u.precision))}return e}),x=(e,n)=>{if(P(n)&&(n=re.value),n===0)return Math.round(e);let a=String(e);const s=a.indexOf(".");if(s===-1||!a.replace(".","").split("")[s+n])return e;const w=a.length;return a.charAt(w-1)==="5"&&(a=`${a.slice(0,Math.max(0,w-1))}6`),Number.parseFloat(Number(a).toFixed(n))},L=e=>{if(I(e))return 0;const n=e.toString(),a=n.indexOf(".");let s=0;return a!==-1&&(s=n.length-a-1),s},R=(e,n=1)=>m(e)?x(e+u.step*n):c.currentValue,B=()=>{if(u.readonly||h.value||G.value)return;const e=Number(C.value)||0,n=R(e);g(n),l(F,c.currentValue)},T=()=>{if(u.readonly||h.value||U.value)return;const e=Number(C.value)||0,n=R(e,-1);g(n),l(F,c.currentValue)},z=(e,n)=>{const{max:a,min:s,step:o,precision:b,stepStrictly:w,valueOnClear:E}=u;a<s&&Be("InputNumber","min should not be greater than max.");let d=Number(e);if(I(e)||Number.isNaN(d))return null;if(e===""){if(E===null)return null;d=Te(E)?{min:s,max:a}[E]:E}return w&&(d=x(Math.round(d/o)*o,b)),P(b)||(d=x(d,b)),(d>a||d<s)&&(d=d>a?a:s,n&&l(y,d)),d},g=(e,n=!0)=>{var a;const s=c.currentValue,o=z(e);if(!n){l(y,o);return}s!==o&&(c.userInput=null,l(y,o),l(te,o,s),u.validateEvent&&((a=v==null?void 0:v.validate)==null||a.call(v,"change").catch(b=>Z())),c.currentValue=o)},ae=e=>{c.userInput=e;const n=e===""?null:Number(e);l(F,n),g(n,!1)},ue=e=>{const n=e!==""?Number(e):"";(m(n)&&!Number.isNaN(n)||e==="")&&g(n),c.userInput=null},le=()=>{var e,n;(n=(e=N.value)==null?void 0:e.focus)==null||n.call(e)},se=()=>{var e,n;(n=(e=N.value)==null?void 0:e.blur)==null||n.call(e)},oe=e=>{l("focus",e)},ie=e=>{var n;l("blur",e),u.validateEvent&&((n=v==null?void 0:v.validate)==null||n.call(v,"blur").catch(a=>Z()))};return Ne(()=>u.modelValue,e=>{const n=z(c.userInput),a=z(e,!0);!m(n)&&(!n||n!==a)&&(c.currentValue=a,c.userInput=null)},{immediate:!0}),he(()=>{var e;const{min:n,max:a,modelValue:s}=u,o=(e=N.value)==null?void 0:e.input;if(o.setAttribute("role","spinbutton"),Number.isFinite(a)?o.setAttribute("aria-valuemax",String(a)):o.removeAttribute("aria-valuemax"),Number.isFinite(n)?o.setAttribute("aria-valuemin",String(n)):o.removeAttribute("aria-valuemin"),o.setAttribute("aria-valuenow",String(c.currentValue)),o.setAttribute("aria-disabled",String(h.value)),!m(s)&&s!=null){let b=Number(s);Number.isNaN(b)&&(b=null),l(y,b)}}),Ve(()=>{var e;const n=(e=N.value)==null?void 0:e.input;n==null||n.setAttribute("aria-valuenow",`${c.currentValue}`)}),i({focus:le,blur:se}),(e,n)=>(f(),D("div",{class:K([r(p).b(),r(p).m(r($)),r(p).is("disabled",r(h)),r(p).is("without-controls",!e.controls),r(p).is("controls-right",r(A))]),onDragstart:n[1]||(n[1]=k(()=>{},["prevent"]))},[e.controls?q((f(),D("span",{key:0,role:"button","aria-label":r(O)("el.inputNumber.decrease"),class:K([r(p).e("decrease"),r(p).is("disabled",r(U))]),onKeydown:_(T,["enter"])},[M(r(X),null,{default:J(()=>[r(A)?(f(),S(r(Pe),{key:0})):(f(),S(r(Fe),{key:1}))]),_:1})],42,Me)),[[r(ee),T]]):Q("v-if",!0),e.controls?q((f(),D("span",{key:1,role:"button","aria-label":r(O)("el.inputNumber.increase"),class:K([r(p).e("increase"),r(p).is("disabled",r(G))]),onKeydown:_(B,["enter"])},[M(r(X),null,{default:J(()=>[r(A)?(f(),S(r(Ae),{key:0})):(f(),S(r(Ce),{key:1}))]),_:1})],42,Oe)),[[r(ee),B]]):Q("v-if",!0),M(r(ye),{id:e.id,ref_key:"input",ref:N,type:"number",step:e.step,"model-value":r(C),placeholder:e.placeholder,readonly:e.readonly,disabled:r(h),size:r($),max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onWheel:n[0]||(n[0]=k(()=>{},["prevent"])),onKeydown:[_(k(B,["prevent"]),["up"]),_(k(T,["prevent"]),["down"])],onBlur:ie,onFocus:oe,onInput:ae,onChange:ue},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}}));var $e=xe(Ge,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const qe=ze($e);export{qe as E};
